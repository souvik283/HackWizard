<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleaning Request Form</title>
    <link rel="stylesheet" href="/css-folder/cleaning.css">
    <link rel="stylesheet" href="/css-folder/nav.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <section class="header">
        <nav>
            <a href="/index.html">Smart India Clean India</a>
            <img src="/images/indialogo.png" alt="logo">
            <div class="nav-link" id="nav-link">
                <i class="fa-solid fa-xmark fa-lg" id="nav-cross"></i>
                <ul>
                    <li>
                        <a href="/index.html">HOME</a>
                    </li>
                    <li>
                        <a href="/html-folder/about.html">ABOUT</a>
                    </li>
                    <li>
                        <a href="/html-folder/login.html" target="_blank">LOGIN</a>
                    </li>
                    <li>
                        <a href="/html-folder/profile.html">PROFILE</a>
                    </li>
                    <li>
                        <a href="/html-folder/contact.html">CONTACT</a>
                    </li>
                </ul>
            </div>
            <i class="fa-solid fa-bars fa-lg" id="nav-menu"></i>
        </nav>
        <div class="container">
            <h1>Cleaning Request Form</h1>

            <!-- <div class="image-preview" id="image-container">
            <h2>Image Preview</h2>
            <img id="preview" src="" alt="Image Preview" style="display: none;">
        </div> -->

            <div id="image-container"></div>
            <div class="Imagego">
            <input type="file" id="imageUpload" accept="image/*" onchange="loadImage(event)">
            </div>
            <!-- <div class="Imagego">
            <label for="image-upload">Upload Image:</label> -->
            <!-- <input type="file" id="imageUpload"  name="image-upload" accept="image/*" onchange="previewImage(event)" onchange="loadImage(event)" > -->
            <!-- </div> -->
            <div id="image-container"></div>
            <div id="label-container"></div>
            <label for="name">Please enter your name:</label>
            <textarea id="name" name="name"></textarea>

            <label for="description">Description:</label>
            <textarea id="comment" name="description"></textarea>

            <label for="location">Waste Location:</label>
            <input type="text" id="location" name="location" placeholder=" " readonly>

            <div class="Button-container">
                <div class="location">
                    <button type="button" id="get-location">Get Waste Location</button>
                    <br>
                </div>
                <div class="submit">
                    <button class="submit-btn" type="submit">Submit Request</button>
                </div>
            </div>
            </form>
        </div>
        </div>


        <section class="footer">
            <div class="footer-container">
                <p>&copy; 2025 Smart India Clean India. All rights reserved.</p>
                <div class="social-icon">
                    <div> <a href="www.facebook.com" target="_blank"> <i class="fa-brands fa-facebook fa-xl"></i></a>
                    </div>
                    <div> <a href="www.instsgram.com" target="_blank"> <i class="fa-brands fa-instagram fa-xl"></i></a>
                    </div>
                    <div> <a href="www.twitter.com" target="_blank"> <i class="fa-brands fa-x-twitter fa-xl"></i></a>
                    </div>
                    <div> <a href="www.linkedin.com" target="_blank"> <i class="fa-brands fa-linkedin fa-xl"></i></a>
                    </div>
                </div>
            </div>
        </section>


        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
        <script type="text/javascript">
            const URL = "https://teachablemachine.withgoogle.com/models/xugPJMxVd/";

            let model, labelContainer, maxPredictions, imageElement;

            // Load model on page load
            async function init() {
                const modelURL = URL + "model.json";
                const metadataURL = URL + "metadata.json";

                // load the model and metadata
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();

                labelContainer = document.getElementById("label-container");
                for (let i = 0; i < maxPredictions; i++) {
                    labelContainer.appendChild(document.createElement("div"));
                }
            }

            // Function to load image from input
            function loadImage(event) {
                const reader = new FileReader();
                reader.onload = function () {
                    const imgContainer = document.getElementById("image-container");
                    imgContainer.innerHTML = ""; // clear previous image
                    imageElement = document.createElement("img");
                    imageElement.src = reader.result;
                    imageElement.width = 200;
                    imageElement.height = 200;
                    imgContainer.appendChild(imageElement);

                    // Run prediction after image is loaded
                    imageElement.onload = predict;
                };
                reader.readAsDataURL(event.target.files[0]);
            }

            // Run prediction
            async function predict() {
                const prediction = await model.predict(imageElement);
                for (let i = 0; i < maxPredictions; i++) {
                    const classPrediction =
                        prediction[i].className + ": " + prediction[i].probability.toFixed(2);
                    labelContainer.childNodes[i].innerHTML = classPrediction;
                }
            }

            // Initialize model when page loads
            window.onload = init;
        </script>

        <script src="/js-folder/cleaning.js"></script>


        <script src="/js-folder/nav.js"></script>

</body>

</html>